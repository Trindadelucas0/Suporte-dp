<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Passo 6: Webhook Kirvano - Guia de Configura√ß√£o</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            position: relative;
            margin: 1rem 0;
        }
        .copy-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            background: #4f46e5;
            color: white;
            border: none;
            padding: 6px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: background 0.2s;
        }
        .copy-btn:hover {
            background: #4338ca;
        }
        .copy-btn.copied {
            background: #10b981;
        }
        .step-number {
            background: #06b6d4;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 12px;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-50 to-indigo-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <div class="bg-white rounded-2xl shadow-xl p-8 mb-6">
            <div class="flex items-center justify-between mb-4">
                <div>
                    <h1 class="text-3xl font-bold text-gray-800 mb-2">6Ô∏è‚É£ Passo 6: Webhook Kirvano</h1>
                    <p class="text-gray-600">Configurar webhook da plataforma Kirvano</p>
                </div>
                <a href="index.html" class="text-purple-600 hover:text-purple-700 font-semibold">‚Üê Voltar</a>
            </div>
        </div>

        <!-- Step 6.1 -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">üîß 6.1 - Acessar Configura√ß√µes de Webhook</h2>
            
            <div class="space-y-4">
                <div class="flex items-start">
                    <span class="step-number">1</span>
                    <div>
                        <p class="font-semibold text-gray-800">Fa√ßa login no painel da Kirvano</p>
                        <p class="text-gray-600 text-sm">Acesse o painel administrativo da Kirvano</p>
                    </div>
                </div>

                <div class="flex items-start">
                    <span class="step-number">2</span>
                    <div>
                        <p class="font-semibold text-gray-800">Navegue at√© Configura√ß√µes ‚Üí Webhooks</p>
                        <p class="text-gray-600 text-sm">Ou procure por "Integra√ß√µes" ou "API" no menu</p>
                    </div>
                </div>

                <div class="flex items-start">
                    <span class="step-number">3</span>
                    <div>
                        <p class="font-semibold text-gray-800">Clique em "Criar Webhook" ou "Adicionar"</p>
                        <p class="text-gray-600 text-sm">Voc√™ ver√° um formul√°rio para configurar o webhook</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 6.2 -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">üåê 6.2 - Configurar URL do Webhook</h2>
            <p class="text-gray-600 mb-4">
                No campo "URL do Webhook" ou "Endpoint", cole a URL do seu servidor:
            </p>

            <div class="code-block">
                <button class="copy-btn" onclick="copyCode(this, 'KIRVANO_URL')">Copiar</button>
                <code id="KIRVANO_URL">https://seu-app.onrender.com/webhook/kirvano</code>
            </div>

            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded mt-4">
                <p class="text-yellow-800">
                    <strong>‚ö†Ô∏è Importante:</strong> Substitua <code>seu-app.onrender.com</code> pela URL real do seu aplicativo. 
                    Certifique-se de usar HTTPS em produ√ß√£o.
                </p>
            </div>
        </div>

        <!-- Step 6.3 -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">üìã 6.3 - Selecionar Eventos</h2>
            <p class="text-gray-600 mb-4">
                Selecione os eventos que voc√™ quer receber. Para o sistema funcionar, voc√™ precisa de:
            </p>

            <div class="bg-green-50 border-l-4 border-green-400 p-4 rounded">
                <p class="text-green-800 font-semibold mb-2">‚úÖ Eventos Necess√°rios:</p>
                <ul class="list-disc list-inside text-green-700 space-y-1">
                    <li><code>sale.approved</code> - Quando uma venda √© aprovada</li>
                    <li><code>payment.approved</code> - Quando um pagamento √© aprovado</li>
                    <li><code>order.completed</code> - Quando um pedido √© completado</li>
                </ul>
            </div>

            <div class="bg-blue-50 border-l-4 border-blue-400 p-4 rounded mt-4">
                <p class="text-blue-800">
                    <strong>üí° Dica:</strong> O evento mais importante √© <code>sale.approved</code>. 
                    Os outros s√£o opcionais mas podem ser √∫teis.
                </p>
            </div>
        </div>

        <!-- Step 6.4 -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">üîê 6.4 - Copiar Secret do Webhook</h2>
            <p class="text-gray-600 mb-4">
                Ap√≥s criar o webhook, a Kirvano vai gerar um "Secret" ou "Chave Secreta". 
                Voc√™ precisa copiar esse valor.
            </p>

            <div class="space-y-4">
                <div class="flex items-start">
                    <span class="step-number">1</span>
                    <div>
                        <p class="font-semibold text-gray-800">Ap√≥s criar o webhook, procure por "Secret" ou "Chave Secreta"</p>
                        <p class="text-gray-600 text-sm">Geralmente aparece na lista de webhooks ou nas configura√ß√µes do webhook</p>
                    </div>
                </div>

                <div class="flex items-start">
                    <span class="step-number">2</span>
                    <div>
                        <p class="font-semibold text-gray-800">Clique em "Mostrar" ou "Revelar" para ver o secret</p>
                        <p class="text-gray-600 text-sm">Copie o valor completo (geralmente √© uma string longa)</p>
                    </div>
                </div>

                <div class="flex items-start">
                    <span class="step-number">3</span>
                    <div>
                        <p class="font-semibold text-gray-800">Cole no arquivo .env</p>
                        <p class="text-gray-600 text-sm">Abra o arquivo .env e atualize a vari√°vel KIRVANO_WEBHOOK_SECRET</p>
                    </div>
                </div>
            </div>

            <div class="code-block mt-4">
                <button class="copy-btn" onclick="copyCode(this, 'KIRVANO_SECRET')">Copiar</button>
                <code id="KIRVANO_SECRET">KIRVANO_WEBHOOK_SECRET=cole-o-secret-aqui</code>
            </div>
        </div>

        <!-- Step 6.5 -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">‚úÖ 6.5 - Verificar Configura√ß√£o</h2>
            <p class="text-gray-600 mb-4">
                Verifique se tudo est√° configurado corretamente:
            </p>

            <div class="space-y-3">
                <div class="flex items-center">
                    <input type="checkbox" class="w-5 h-5 text-purple-600 rounded mr-3">
                    <span class="text-gray-700">Webhook criado na Kirvano</span>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" class="w-5 h-5 text-purple-600 rounded mr-3">
                    <span class="text-gray-700">URL configurada corretamente</span>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" class="w-5 h-5 text-purple-600 rounded mr-3">
                    <span class="text-gray-700">Eventos selecionados (sale.approved)</span>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" class="w-5 h-5 text-purple-600 rounded mr-3">
                    <span class="text-gray-700">Secret copiado e colado no .env</span>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" class="w-5 h-5 text-purple-600 rounded mr-3">
                    <span class="text-gray-700">Servidor reiniciado ap√≥s atualizar .env</span>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="flex justify-between mt-8">
            <a href="passo5-hotmart.html" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-3 px-6 rounded-lg transition">
                ‚Üê Passo Anterior
            </a>
            <a href="passo7-testar.html" class="bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 px-6 rounded-lg transition">
                Pr√≥ximo Passo ‚Üí
            </a>
        </div>
    </div>

    <script>
        function copyCode(btn, codeId) {
            const codeElement = document.getElementById(codeId);
            const text = codeElement.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                btn.textContent = 'Copiado!';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = 'Copiar';
                    btn.classList.remove('copied');
                }, 2000);
            });
        }
    </script>
</body>
</html>

