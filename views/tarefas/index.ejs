<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            red: '#DC2626',
                            yellow: '#FBBF24'
                        }
                    }
                }
            }
        }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bungee+Inline&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/css/tarefas-notion.css">
    <style>
        .bungee-inline-regular {
            font-family: "Bungee Inline", sans-serif;
            font-weight: 400;
            font-style: normal;
        }
    </style>
</head>
<body class="bg-white">
    <% if (typeof user !== 'undefined' && user) { %>
        <%- include('../partials/navbar') %>
    <% } %>

    <main class="max-w-full mx-auto px-6 py-4">
        <!-- Header estilo Notion -->
        <div class="mb-6">
            <div class="flex items-center gap-3 mb-4">
                <div class="w-8 h-8 bg-green-500 rounded flex items-center justify-center">
                    <i class="fas fa-check text-white text-sm"></i>
                </div>
                <h1 class="text-3xl font-bold text-gray-900">Tarefas</h1>
            </div>
            
            <!-- View Selector -->
            <div class="flex items-center gap-2 mb-4">
                <button class="px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded text-sm text-gray-700 flex items-center gap-2 transition">
                    <i class="fas fa-th text-gray-600"></i>
                    Todas as tarefas
                </button>
            </div>

            <!-- Action Bar -->
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-2">
                    <button class="p-2 hover:bg-gray-100 rounded text-gray-600">
                        <i class="fas fa-bars"></i>
                    </button>
                    <button class="p-2 hover:bg-gray-100 rounded text-blue-600">
                        <i class="fas fa-sort"></i>
                    </button>
                    <button class="p-2 hover:bg-gray-100 rounded text-gray-600">
                        <i class="fas fa-bolt"></i>
                    </button>
                    <button class="p-2 hover:bg-gray-100 rounded text-gray-600">
                        <i class="fas fa-search"></i>
                    </button>
                    <button class="p-2 hover:bg-gray-100 rounded text-gray-600">
                        <i class="fas fa-ellipsis-h"></i>
                    </button>
                </div>
                <button 
                    type="button"
                    id="btnNovaTarefa"
                    class="px-4 py-2 bg-gray-900 hover:bg-gray-800 text-white rounded text-sm font-medium transition flex items-center gap-2">
                    <i class="fas fa-plus"></i>
                    Nova tarefa
                </button>
            </div>
        </div>

        <!-- Tabela estilo Notion -->
        <div class="bg-white border border-gray-200 rounded-lg overflow-hidden">
            <div class="overflow-x-auto">
                <table class="w-full" id="tabelaTarefas">
                    <thead class="bg-gray-50 border-b border-gray-200">
                        <tr>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">
                                <div class="flex items-center gap-2">
                                    <i class="fas fa-font text-gray-400"></i>
                                    <span>Tarefa</span>
                                    <i class="fas fa-info-circle text-gray-400 text-xs"></i>
                                </div>
                            </th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">
                                <div class="flex items-center gap-2">
                                    <i class="fas fa-chevron-down text-gray-400"></i>
                                    <span>Tipo</span>
                                    <i class="fas fa-info-circle text-gray-400 text-xs"></i>
                                </div>
                            </th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">
                                <div class="flex items-center gap-2">
                                    <i class="fas fa-circle-notch text-gray-400"></i>
                                    <span>Status</span>
                                    <i class="fas fa-info-circle text-gray-400 text-xs"></i>
                                </div>
                            </th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">
                                <div class="flex items-center gap-2">
                                    <i class="fas fa-chevron-down text-gray-400"></i>
                                    <span>Prioridade</span>
                                    <i class="fas fa-info-circle text-gray-400 text-xs"></i>
                                </div>
                            </th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">
                                <div class="flex items-center gap-2">
                                    <i class="fas fa-calendar text-gray-400"></i>
                                    <span>Prazo Limite</span>
                                    <i class="fas fa-info-circle text-gray-400 text-xs"></i>
                                </div>
                            </th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">
                                <div class="flex items-center gap-2">
                                    <i class="fas fa-calendar-check text-gray-400"></i>
                                    <span>Data de ConclusÃ£o</span>
                                    <i class="fas fa-info-circle text-gray-400 text-xs"></i>
                                </div>
                            </th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">
                                <div class="flex items-center gap-2">
                                    <i class="fas fa-align-left text-gray-400"></i>
                                    <span>OBS:</span>
                                </div>
                            </th>
                            <th class="px-4 py-3 w-8"></th>
                            <th class="px-4 py-3 w-8"></th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-100" id="tbodyTarefas">
                        <% 
                            const todasTarefas = [
                                ...(kanban.nao_iniciado || []),
                                ...(kanban.em_andamento || []),
                                ...(kanban.feito || [])
                            ];
                        %>
                        <% if (todasTarefas.length > 0) { %>
                            <% todasTarefas.forEach((tarefa, index) => { %>
                                <tr class="hover:bg-gray-50 transition tarefa-row" data-id="<%= tarefa.id %>">
                                    <!-- Nome (EditÃ¡vel) -->
                                    <td class="px-4 py-3">
                                        <div class="editable-cell" data-field="nome" data-tarefa-id="<%= tarefa.id %>">
                                            <span class="editable-text text-gray-900 font-medium cursor-text hover:bg-gray-100 px-1 py-0.5 rounded"><%= tarefa.nome %></span>
                                            <input type="text" class="editable-input hidden w-full px-2 py-1 border border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-500" value="<%= tarefa.nome %>">
                                        </div>
                                    </td>
                                    
                                    <!-- Tipo (EditÃ¡vel) -->
                                    <td class="px-4 py-3">
                                        <div class="editable-cell" data-field="tipo" data-tarefa-id="<%= tarefa.id %>">
                                            <span class="editable-text cursor-text hover:bg-gray-100 px-1 py-0.5 rounded">
                                                <% if (tarefa.tipo) { %>
                                                    <span class="px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs"><%= tarefa.tipo %></span>
                                                <% } else { %>
                                                    <span class="text-gray-400 text-xs">â€”</span>
                                                <% } %>
                                            </span>
                                            <select class="editable-input hidden w-full px-2 py-1 border border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs">
                                                <option value="">â€”</option>
                                                <option value="FÃ‰RIAS" <%= tarefa.tipo === 'FÃ‰RIAS' ? 'selected' : '' %>>FÃ‰RIAS</option>
                                                <option value="13Â° ADIANTAMENTO" <%= tarefa.tipo === '13Â° ADIANTAMENTO' ? 'selected' : '' %>>13Â° ADIANTAMENTO</option>
                                                <option value="13Â° INTEGRAL" <%= tarefa.tipo === '13Â° INTEGRAL' ? 'selected' : '' %>>13Â° INTEGRAL</option>
                                                <option value="RESCISÃƒO" <%= tarefa.tipo === 'RESCISÃƒO' ? 'selected' : '' %>>RESCISÃƒO</option>
                                                <option value="ADMISSÃƒO" <%= tarefa.tipo === 'ADMISSÃƒO' ? 'selected' : '' %>>ADMISSÃƒO</option>
                                                <option value="AFASTAMENTO" <%= tarefa.tipo === 'AFASTAMENTO' ? 'selected' : '' %>>AFASTAMENTO</option>
                                                <option value="ALTERAÃ‡ÃƒO SALARIAL" <%= tarefa.tipo === 'ALTERAÃ‡ÃƒO SALARIAL' ? 'selected' : '' %>>ALTERAÃ‡ÃƒO SALARIAL</option>
                                                <option value="ALTERAÃ‡ÃƒO DE CARGO" <%= tarefa.tipo === 'ALTERAÃ‡ÃƒO DE CARGO' ? 'selected' : '' %>>ALTERAÃ‡ÃƒO DE CARGO</option>
                                                <option value="OUTROS" <%= tarefa.tipo === 'OUTROS' ? 'selected' : '' %>>OUTROS</option>
                                            </select>
                                        </div>
                                    </td>
                                    
                                    <!-- Status (EditÃ¡vel) -->
                                    <td class="px-4 py-3">
                                        <div class="editable-cell" data-field="status" data-tarefa-id="<%= tarefa.id %>">
                                            <% 
                                                const statusConfig = {
                                                    'nao_iniciado': { label: 'NÃ£o Iniciado', color: 'bg-gray-100 text-gray-700' },
                                                    'em_andamento': { label: 'Em Andamento', color: 'bg-blue-100 text-blue-700' },
                                                    'feito': { label: 'Feito', color: 'bg-green-100 text-green-700' }
                                                };
                                                const status = statusConfig[tarefa.status] || statusConfig['nao_iniciado'];
                                            %>
                                            <span class="editable-text cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded">
                                                <span class="px-2 py-1 <%= status.color %> rounded text-xs"><%= status.label %></span>
                                            </span>
                                            <select class="editable-input hidden w-full px-2 py-1 border border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs">
                                                <option value="nao_iniciado" <%= tarefa.status === 'nao_iniciado' ? 'selected' : '' %>>NÃ£o Iniciado</option>
                                                <option value="em_andamento" <%= tarefa.status === 'em_andamento' ? 'selected' : '' %>>Em Andamento</option>
                                                <option value="feito" <%= tarefa.status === 'feito' ? 'selected' : '' %>>Feito</option>
                                            </select>
                                        </div>
                                    </td>
                                    
                                    <!-- Prioridade (EditÃ¡vel) -->
                                    <td class="px-4 py-3">
                                        <div class="editable-cell" data-field="prioridade" data-tarefa-id="<%= tarefa.id %>">
                                            <% 
                                                const prioridadeConfig = {
                                                    'alta': { label: 'ðŸ”´ Alta', color: 'text-red-600' },
                                                    'media': { label: 'ðŸŸ¡ MÃ©dia', color: 'text-yellow-600' },
                                                    'baixa': { label: 'ðŸŸ¢ Baixa', color: 'text-green-600' }
                                                };
                                                const prioridade = prioridadeConfig[tarefa.prioridade] || prioridadeConfig['media'];
                                            %>
                                            <span class="editable-text cursor-pointer hover:bg-gray-100 px-1 py-0.5 rounded">
                                                <span class="<%= prioridade.color %> text-xs"><%= prioridade.label %></span>
                                            </span>
                                            <select class="editable-input hidden w-full px-2 py-1 border border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs">
                                                <option value="alta" <%= tarefa.prioridade === 'alta' ? 'selected' : '' %>>ðŸ”´ Alta</option>
                                                <option value="media" <%= tarefa.prioridade === 'media' ? 'selected' : '' %>>ðŸŸ¡ MÃ©dia</option>
                                                <option value="baixa" <%= tarefa.prioridade === 'baixa' ? 'selected' : '' %>>ðŸŸ¢ Baixa</option>
                                            </select>
                                        </div>
                                    </td>
                                    
                                    <!-- Prazo Limite (EditÃ¡vel) -->
                                    <td class="px-4 py-3 whitespace-nowrap">
                                        <div class="editable-cell" data-field="data_vencimento" data-tarefa-id="<%= tarefa.id %>">
                                            <span class="editable-text text-sm text-gray-600 cursor-text hover:bg-gray-100 px-1 py-0.5 rounded">
                                                <%= new Date(tarefa.data_vencimento).toLocaleDateString('pt-BR') %>
                                            </span>
                                            <input type="date" class="editable-input hidden w-full px-2 py-1 border border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs" value="<%= tarefa.data_vencimento %>">
                                        </div>
                                    </td>
                                    
                                    <!-- Data de ConclusÃ£o (EditÃ¡vel) -->
                                    <td class="px-4 py-3 whitespace-nowrap">
                                        <div class="editable-cell" data-field="data_conclusao" data-tarefa-id="<%= tarefa.id %>">
                                            <span class="editable-text text-sm text-gray-600 cursor-text hover:bg-gray-100 px-1 py-0.5 rounded">
                                                <%= tarefa.data_conclusao ? new Date(tarefa.data_conclusao).toLocaleDateString('pt-BR') : 'â€”' %>
                                            </span>
                                            <input type="date" class="editable-input hidden w-full px-2 py-1 border border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs" value="<%= tarefa.data_conclusao || '' %>">
                                        </div>
                                    </td>
                                    
                                    <!-- OBS (EditÃ¡vel) -->
                                    <td class="px-4 py-3">
                                        <div class="editable-cell" data-field="descricao" data-tarefa-id="<%= tarefa.id %>">
                                            <span class="editable-text cursor-text hover:bg-gray-100 px-1 py-0.5 rounded">
                                                <% if (tarefa.descricao) { %>
                                                    <span class="text-gray-500 text-xs truncate block max-w-xs" title="<%= tarefa.descricao %>">
                                                        <%= tarefa.descricao.length > 50 ? tarefa.descricao.substring(0, 50) + '...' : tarefa.descricao %>
                                                    </span>
                                                <% } else { %>
                                                    <span class="text-gray-400 text-xs">â€”</span>
                                                <% } %>
                                            </span>
                                            <textarea class="editable-input hidden w-full px-2 py-1 border border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs" rows="2"><%= tarefa.descricao || '' %></textarea>
                                        </div>
                                    </td>
                                    
                                    <!-- AÃ§Ãµes -->
                                    <td class="px-4 py-3">
                                        <button class="btn-excluir text-gray-400 hover:text-red-600 p-1" data-id="<%= tarefa.id %>" title="Excluir">
                                            <i class="fas fa-trash text-xs"></i>
                                        </button>
                                    </td>
                                    <td class="px-4 py-3"></td>
                                </tr>
                            <% }); %>
                        <% } else { %>
                            <tr>
                                <td colspan="9" class="px-4 py-12 text-center text-gray-400">
                                    <div class="flex flex-col items-center gap-2">
                                        <i class="fas fa-inbox text-4xl mb-2"></i>
                                        <p>Nenhuma tarefa criada ainda</p>
                                        <button 
                                            type="button"
                                            id="btnNovaTarefaEmpty"
                                            class="mt-4 px-4 py-2 bg-gray-900 hover:bg-gray-800 text-white rounded text-sm font-medium transition">
                                            <i class="fas fa-plus mr-2"></i>
                                            Criar primeira tarefa
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        <% } %>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Footer estilo Notion -->
        <div class="mt-4 flex items-center gap-2 text-sm text-gray-500">
            <button class="hover:text-gray-700 flex items-center gap-1">
                <i class="fas fa-plus text-xs"></i>
                Nova pÃ¡gina
            </button>
        </div>
    </main>

    <!-- Modal de Tarefa -->
    <div id="modalTarefa" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="sticky top-0 bg-white border-b p-4 flex items-center justify-between">
                <h3 class="text-xl font-bold text-gray-900" id="modalTitulo">Nova Tarefa</h3>
                <button type="button" id="btnFecharModal" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>
            <form id="formTarefa" class="p-6">
                <input type="hidden" id="tarefaId" name="id">
                
                <div class="mb-4">
                    <label for="nome" class="block text-sm font-medium text-gray-700 mb-2">
                        Nome da Tarefa <span class="text-red-500">*</span>
                    </label>
                    <input 
                        type="text" 
                        id="nome" 
                        name="nome" 
                        required
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-red focus:border-transparent"
                        placeholder="Ex: FÃ©rias JoÃ£o, Fechamento folha marÃ§o..."
                    >
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label for="tipo" class="block text-sm font-medium text-gray-700 mb-2">
                            Tipo (Opcional)
                        </label>
                        <select 
                            id="tipo" 
                            name="tipo"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-red focus:border-transparent"
                        >
                            <option value="">Selecione...</option>
                            <option value="FÃ‰RIAS">FÃ‰RIAS</option>
                            <option value="13Â° ADIANTAMENTO">13Â° ADIANTAMENTO</option>
                            <option value="13Â° INTEGRAL">13Â° INTEGRAL</option>
                            <option value="RESCISÃƒO">RESCISÃƒO</option>
                            <option value="ADMISSÃƒO">ADMISSÃƒO</option>
                            <option value="AFASTAMENTO">AFASTAMENTO</option>
                            <option value="ALTERAÃ‡ÃƒO SALARIAL">ALTERAÃ‡ÃƒO SALARIAL</option>
                            <option value="ALTERAÃ‡ÃƒO DE CARGO">ALTERAÃ‡ÃƒO DE CARGO</option>
                            <option value="OUTROS">OUTROS</option>
                        </select>
                    </div>

                    <div>
                        <label for="prioridade" class="block text-sm font-medium text-gray-700 mb-2">
                            Prioridade <span class="text-red-500">*</span>
                        </label>
                        <select 
                            id="prioridade" 
                            name="prioridade" 
                            required
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-red focus:border-transparent"
                        >
                            <option value="alta">ðŸ”´ Alta</option>
                            <option value="media" selected>ðŸŸ¡ MÃ©dia</option>
                            <option value="baixa">ðŸŸ¢ Baixa</option>
                        </select>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label for="data_vencimento" class="block text-sm font-medium text-gray-700 mb-2">
                            Data de Vencimento <span class="text-red-500">*</span>
                        </label>
                        <input 
                            type="date" 
                            id="data_vencimento" 
                            name="data_vencimento" 
                            required
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-red focus:border-transparent"
                        >
                    </div>

                    <div id="statusContainer">
                        <label for="status" class="block text-sm font-medium text-gray-700 mb-2">
                            Status
                        </label>
                        <select 
                            id="status" 
                            name="status"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-red focus:border-transparent"
                        >
                            <option value="nao_iniciado">NÃ£o Iniciado</option>
                            <option value="em_andamento">Em Andamento</option>
                            <option value="feito">Feito</option>
                        </select>
                    </div>
                </div>

                <div class="mb-4">
                    <label for="descricao" class="block text-sm font-medium text-gray-700 mb-2">
                        DescriÃ§Ã£o (Opcional)
                    </label>
                    <textarea 
                        id="descricao" 
                        name="descricao" 
                        rows="3"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-red focus:border-transparent"
                        placeholder="Adicione detalhes sobre a tarefa..."
                    ></textarea>
                </div>

                <div class="flex justify-end gap-3 pt-4 border-t">
                    <button 
                        type="button" 
                        id="btnCancelar"
                        class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition"
                    >
                        Cancelar
                    </button>
                    <button 
                        type="submit" 
                        class="px-6 py-2 bg-gradient-to-r from-primary-red to-primary-yellow text-white rounded-lg font-semibold hover:opacity-90 transition"
                    >
                        Salvar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Disponibiliza token CSRF globalmente
        window.csrfToken = '<%= typeof csrfToken !== "undefined" && csrfToken ? csrfToken : "" %>';
        
        function getCSRFHeaders() {
            const headers = { 'Content-Type': 'application/json' };
            if (window.csrfToken) {
                headers['X-CSRF-Token'] = window.csrfToken;
            }
            return headers;
        }
    </script>
    <script src="/js/confirm-modal.js"></script>
    <script src="/js/tarefas.js"></script>
    <script src="/js/tarefas-inline.js"></script>
    <script>
        // Destaca a tarefa na tabela se foi selecionada via link (sem abrir modal)
        <% if (tarefaSelecionada) { %>
            document.addEventListener('DOMContentLoaded', () => {
                const tarefa = <%- JSON.stringify(tarefaSelecionada) %>;
                
                // Apenas destaca a linha da tarefa na tabela
                const row = document.querySelector(`tr[data-id="${tarefa.id}"]`);
                if (row) {
                    // Remove o parÃ¢metro ?id= da URL para limpar
                    if (window.location.search.includes('id=')) {
                        const url = new URL(window.location);
                        url.searchParams.delete('id');
                        window.history.replaceState({}, '', url);
                    }
                    
                    // Rola atÃ© a tarefa e destaca
                    setTimeout(() => {
                        row.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        row.classList.add('bg-yellow-100', 'border-2', 'border-yellow-400');
                        setTimeout(() => {
                            row.classList.remove('bg-yellow-100', 'border-2', 'border-yellow-400');
                        }, 3000);
                    }, 100);
                }
            });
        <% } %>

        // BotÃ£o nova tarefa vazio e listeners de exclusÃ£o
        document.addEventListener('DOMContentLoaded', () => {
            const btnNovaTarefaEmpty = document.getElementById('btnNovaTarefaEmpty');
            if (btnNovaTarefaEmpty) {
                btnNovaTarefaEmpty.addEventListener('click', () => {
                    abrirModalNova();
                });
            }
            
            // Event listeners diretos para botÃµes de excluir (garantir que funciona)
            document.querySelectorAll('.btn-excluir').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    e.preventDefault();
                    
                    // Tenta pegar ID do atributo data-id do botÃ£o
                    let tarefaId = this.getAttribute('data-id');
                    
                    // Se nÃ£o encontrou, tenta pegar da linha pai
                    if (!tarefaId) {
                        const row = this.closest('tr.tarefa-row');
                        tarefaId = row?.getAttribute('data-id');
                    }
                    
                    console.log('BotÃ£o excluir clicado, ID:', tarefaId);
                    
                    if (tarefaId) {
                        excluirTarefa(tarefaId);
                    } else {
                        console.error('ID da tarefa nÃ£o encontrado no botÃ£o');
                        alert('Erro: NÃ£o foi possÃ­vel identificar a tarefa');
                    }
                });
            });
        });
    </script>
</body>
</html>
